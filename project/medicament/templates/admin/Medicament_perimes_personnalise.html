{% extends "admin/change_list.html" %}

{% block object-tools-items %}
    <style>
/* cible ton bouton dans le form custom */
#custom-form a.button {
    background-color: #0d66cc !important;
    border-color: #0d66cc !important;
    color: #fff !important;
    background-image: none !important;
    box-shadow: none !important;
}

/* garder la même couleur même au hover / focus / active */
#custom-form a.button:hover,
#custom-form a.button:focus,
#custom-form a.button:active,
#custom-form a.button:visited {
    background-color: #0d66cc !important;
    border-color: #0d66cc !important;
    color: #fff !important;
}
</style>

<li>
    <form id="custom-form" action="{% url 'admin:sync_oracle2' %}" method="get" style="display:flex;align-items:center;gap:5px;">
        <li style="font-size:15px; font-weight:bold; font-family:Istok; list-style-type:square;">date début:</li><input type="date" id="start_date" name="start_date" required>
        <li style="font-size:15px; font-weight:bold; font-family:Istok; list-style-type:square;">date fin:</li><input type="date" id="end_date" name="end_date" style="margin-right:10px;" required>
        <a href="#" class="button"
           onclick="
               const start = document.getElementById('start_date').value;
               const end = document.getElementById('end_date').value;
               if (!start || !end) {
                   alert('Veuillez remplir les deux dates avant de lancer l’action.');
                   return false;
               }
               document.getElementById('custom-form').submit();
               return false;
           ">
            Mise à jour de la liste
        </a>
    </form>
</li>

<script>
  document.getElementById('start_date').value = new Date().toISOString().split('T')[0];
</script>
{% endblock %}
